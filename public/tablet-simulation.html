<!doctype html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no, maximum-scale=1">
  <title>Kitchen Allergy Tablet Simulation - Clarivore</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/tablet-simulation.css">
</head>
<body class="page-shell">
  <header class="simple-topbar">
    <div class="simple-topbar-inner">
      <a class="simple-brand" href="restaurants.html">
        <img src="https://static.wixstatic.com/media/945e9d_2b97098295d341d493e4a07d80d6b57c~mv2.png" alt="Clarivore logo">
        <span>Clarivore</span>
      </a>
      <div class="simple-nav">
        <!-- populated by shared-nav.js -->
      </div>
    </div>
  </header>

  <main class="page-main">
    <div class="page-content simulation-page">
      <section class="panel intro-panel">
        <div class="intro-copy">
          <h1>Kitchen Allergy Tablet Workflow</h1>
          <p class="muted-text">
            Preview the end-to-end allergy confirmation flow we deploy in participating restaurants. This simulation
            shows what the guest sees on their phone, how the server relays submission codes on their countertop tablet,
            and exactly what the kitchen’s FaceID-enabled tablet and tactile button panel present during service.
          </p>
        </div>
        <button class="primary-btn" id="openSidebarBtn" type="button">
          Open server &amp; kitchen tablets
        </button>
      </section>

      <div class="simulation-layout">
        <section class="panel guest-panel">
          <header class="panel-header">
            <h2>Guest allergy notice</h2>
            <p class="muted-text">Create an order, request the server code, and follow status updates in real time.</p>
          </header>

          <form id="guestOrderForm" class="guest-form">
            <div class="form-row">
              <label>
                Guest name
                <input type="text" id="guestName" name="guestName" placeholder="Jordan Carter">
              </label>
              <label>
                Party size
                <input type="number" id="partySize" name="partySize" min="1" max="12" value="2">
              </label>
            </div>

            <div class="form-row">
              <label class="full-width">
                Service mode
                <div class="mode-toggle" role="radiogroup" aria-label="Service mode">
                  <button type="button" class="mode-option is-active" data-mode="dine-in">Dine-in</button>
                  <button type="button" class="mode-option" data-mode="delivery">Delivery / takeout</button>
                </div>
              </label>
            </div>

            <fieldset class="allergen-selector">
              <legend>Allergens to flag</legend>
                <div class="allergen-grid">
                  <label><input type="checkbox" value="Peanuts"><span>Peanuts</span></label>
                  <label><input type="checkbox" value="Tree Nuts"><span>Tree nuts</span></label>
                  <label><input type="checkbox" value="Dairy"><span>Dairy</span></label>
                  <label><input type="checkbox" value="Eggs"><span>Eggs</span></label>
                  <label><input type="checkbox" value="Soy"><span>Soy</span></label>
                  <label><input type="checkbox" value="Fish"><span>Fish</span></label>
                  <label><input type="checkbox" value="Shellfish"><span>Shellfish</span></label>
                  <label><input type="checkbox" value="Gluten"><span>Gluten</span></label>
                  <label><input type="checkbox" value="Sesame"><span>Sesame</span></label>
              </div>
            </fieldset>

            <label class="full-width">
              Additional notes for the kitchen
              <textarea id="guestNotes" name="guestNotes" rows="3" placeholder="Sauces on the side, cross-contact is OK with grilled items only..."></textarea>
            </label>

            <div class="form-actions">
              <button class="primary-btn" type="submit" id="startWorkflowBtn">Start allergy workflow</button>
              <button class="secondary-btn" type="button" id="resetWorkflowBtn" disabled>Reset</button>
            </div>
          </form>

          <section class="status-board">
            <div class="status-chip" id="orderStatusChip">No order yet</div>
            <div class="status-details">
              <dl>
                <div>
                  <dt>Submission code</dt>
                  <dd id="submissionCodeDisplay">—</dd>
                </div>
                <div>
                  <dt>Chef acknowledgement</dt>
                  <dd id="chefAcknowledgementDisplay">Waiting for server approval</dd>
                </div>
                <div>
                  <dt>Last action</dt>
                  <dd id="lastActionDisplay">—</dd>
                </div>
              </dl>
            </div>
          </section>

          <section class="guest-actions">
            <button class="wide-btn" type="button" id="requestCodeBtn" disabled>Request submission code from server</button>

            <div class="code-entry" aria-live="polite">
              <label>
                Enter code provided by server
                <input type="text" id="codeInput" maxlength="4" inputmode="numeric" placeholder="____" disabled>
              </label>
              <button class="primary-btn" type="button" id="submitCodeBtn" disabled>Submit allergies to server</button>
            </div>

            <div class="user-question" id="userQuestion" hidden>
              <p class="question-text"></p>
              <div class="question-actions">
                <button type="button" class="primary-btn" data-response="yes">Yes</button>
                <button type="button" class="secondary-btn" data-response="no">No</button>
              </div>
            </div>
          </section>

          <section class="timeline-panel">
            <h3>Live timeline</h3>
            <ol id="timelineList" class="timeline-list">
              <li class="empty-state">Actions will appear here when you start a workflow.</li>
            </ol>
          </section>
        </section>
      </div>
    </div>
  </main>

  <button class="sidebar-toggle" id="floatingSidebarBtn" type="button" aria-expanded="false" aria-controls="tabletSidebar">
    View tablets
  </button>

  <div class="sidebar-backdrop" id="tabletSidebarBackdrop"></div>

  <aside class="tablet-sidebar" id="tabletSidebar" aria-hidden="true">
    <header class="sidebar-header">
      <h2>Service tablets</h2>
      <button type="button" id="closeSidebarBtn" aria-label="Close tablet sidebar">×</button>
    </header>

    <section class="device server-device">
      <header>
        <h3>Server companion tablet</h3>
        <p class="muted-text">Mounted beside the POS terminal where orders are entered.</p>
      </header>

      <div class="device-section">
        <h4>Pending guest requests</h4>
        <div id="serverRequestState" class="device-card empty">No guest has requested a code yet.</div>
      </div>

      <div class="device-section">
        <h4>Current order review</h4>
        <div id="serverReviewState" class="device-card empty">Waiting for a guest to submit their allergies.</div>
      </div>
    </section>

    <section class="device kitchen-device">
      <header>
        <h3>Kitchen allergy tablet</h3>
        <p class="muted-text">Includes tactile button deck for gloved hands and FaceID chef verification.</p>
      </header>

      <div class="device-section">
        <h4>Active allergy notice</h4>
        <div id="kitchenActiveOrder" class="device-card empty">Server has not released an order yet.</div>
      </div>

      <div class="device-section">
        <h4>Tactile control panel</h4>
        <div id="kitchenButtonDeck" class="button-grid"></div>
      </div>

      <div class="device-section">
        <h4>Chef FaceID enrollment</h4>
        <div id="chefList" class="chef-grid"></div>
      </div>

      <div class="device-section">
        <h4>Dictated note to guest</h4>
        <div class="device-card">
          <label>
            Record a quick question (yes / no)
            <textarea id="kitchenQuestionInput" rows="2" placeholder="Is it okay if we substitute sesame oil with olive oil?"></textarea>
          </label>
          <button class="primary-btn" type="button" id="sendKitchenQuestionBtn" disabled>Send to guest</button>
        </div>
      </div>
    </section>
  </aside>

  <script type="module">
    import { setupNav } from './js/shared-nav.js';
    setupNav('tablet-sim');
  </script>
  <script type="module" src="js/tablet-simulation-ui.js"></script>
</body>
</html>
